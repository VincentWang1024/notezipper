{"ast":null,"code":"import _regeneratorRuntime from\"/Users/vincent/Desktop/Study/notezipper/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/vincent/Desktop/Study/notezipper/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{COUNTRY_LIST_FAIL,COUNTRY_LIST_REQUEST,COUNTRY_LIST_SUCCESS}from\"../constants/countryConstants\";import axios from\"axios\";export var listCountries=function listCountries(name){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState){var _getState,userInfo,config,_yield$axios$get,data,message;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"search: \",name);_context.prev=1;dispatch({type:COUNTRY_LIST_REQUEST});_getState=getState(),userInfo=_getState.userLogin.userInfo;config={headers:{Authorization:\"Bearer \".concat(userInfo.token)}};_context.next=7;return axios.get(\"https://restcountries.com/v3.1/name/\".concat(name),config);case 7:_yield$axios$get=_context.sent;data=_yield$axios$get.data;console.log(data);dispatch({type:COUNTRY_LIST_SUCCESS,payload:data});_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);message=_context.t0.response&&_context.t0.response.data.message?_context.t0.response.data.message:_context.t0.message;dispatch({type:COUNTRY_LIST_FAIL,payload:message});case 17:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};","map":{"version":3,"sources":["/Users/vincent/Desktop/Study/notezipper/frontend/src/actions/countryActions.js"],"names":["COUNTRY_LIST_FAIL","COUNTRY_LIST_REQUEST","COUNTRY_LIST_SUCCESS","axios","listCountries","name","dispatch","getState","console","log","type","userInfo","userLogin","config","headers","Authorization","token","get","data","payload","message","response"],"mappings":"2UAAA,OACIA,iBADJ,CAEIC,oBAFJ,CAGIC,oBAHJ,KAIS,+BAJT,CAKE,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAO,IAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,IAAD,iGAAU,iBAAOC,QAAP,CAAiBC,QAAjB,8KACrCC,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAwBJ,IAAxB,EADqC,gBAGnCC,QAAQ,CAAC,CACPI,IAAI,CAAET,oBADC,CAAD,CAAR,CAHmC,UAS/BM,QAAQ,EATuB,CAQpBI,QARoB,WAQjCC,SARiC,CAQpBD,QARoB,CAW7BE,MAX6B,CAWpB,CACbC,OAAO,CAAE,CACPC,aAAa,kBAAYJ,QAAQ,CAACK,KAArB,CADN,CADI,CAXoB,uBAiBZb,CAAAA,KAAK,CAACc,GAAN,+CAAiDZ,IAAjD,EAAyDQ,MAAzD,CAjBY,uCAiB3BK,IAjB2B,kBAiB3BA,IAjB2B,CAmBnCV,OAAO,CAACC,GAAR,CAAYS,IAAZ,EACAZ,QAAQ,CAAC,CACPI,IAAI,CAAER,oBADC,CAEPiB,OAAO,CAAED,IAFF,CAAD,CAAR,CApBmC,iFAyB7BE,OAzB6B,CA0BjC,YAAMC,QAAN,EAAkB,YAAMA,QAAN,CAAeH,IAAf,CAAoBE,OAAtC,CACI,YAAMC,QAAN,CAAeH,IAAf,CAAoBE,OADxB,CAEI,YAAMA,OA5BuB,CA6BnCd,QAAQ,CAAC,CACPI,IAAI,CAAEV,iBADC,CAEPmB,OAAO,CAAEC,OAFF,CAAD,CAAR,CA7BmC,qEAAV,oEAAtB","sourcesContent":["import {\n    COUNTRY_LIST_FAIL,\n    COUNTRY_LIST_REQUEST,\n    COUNTRY_LIST_SUCCESS,\n  } from \"../constants/countryConstants\";\n  import axios from \"axios\";\n  \n  export const listCountries = (name) => async (dispatch, getState) => {\n    console.log(\"search: \", name);\n    try {\n      dispatch({\n        type: COUNTRY_LIST_REQUEST,\n      });\n  \n      const {\n        userLogin: { userInfo },\n      } = getState();\n  \n      const config = {\n        headers: {\n          Authorization: `Bearer ${userInfo.token}`,\n        },\n      };\n  \n      const { data } = await axios.get(`https://restcountries.com/v3.1/name/${name}`, config);\n      \n      console.log(data);\n      dispatch({\n        type: COUNTRY_LIST_SUCCESS,\n        payload: data,\n      });\n    } catch (error) {\n      const message =\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message;\n      dispatch({\n        type: COUNTRY_LIST_FAIL,\n        payload: message,\n      });\n    }\n  };"]},"metadata":{},"sourceType":"module"}